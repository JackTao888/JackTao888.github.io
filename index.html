<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Ruijie Tao ‚Äì coder</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Webfont -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <!-- MATRIX BACKGROUND -->
  <canvas id="matrixCanvas"></canvas>
  <div class="matrix-blur"></div>
  
  <canvas id="hero-canvas"></canvas>

  <div class="page">
    <!-- TOP NAV -->
    <header class="nav">
      <div class="nav-left">
        <div class="nav-brand"> Ruijie Tao</div>
      </div>
      <nav class="nav-right">
        <a href="#about">About</a>
        <a href="#work">Work</a>
        <a href="#publications">Publications</a>
        <a href="#contact">Contact</a>
      </nav>
    </header>

    <!-- HERO -->
    <main class="hero">
      <section class="hero-text hero-parallax">
        <div class="label">Creative Developer</div>
        <h1 class="hero-title">
          Contributing to next <span style="white-space:nowrap;">GenAI.</span>
        </h1>
        <p class="hero-subtitle">
          Computer Science @JHU | Applied Math @UCSB | Focus on NLP & LLM | Software Development.
        </p>

        <div class="hero-meta">
          <div>
            <span class="label-small">Based in</span>
            <span>Baltimore, MD üåç</span>
          </div>
          <div>
            <span class="label-small">Available for</span>
            <span>Internships & fulltime & collaborations</span>
          </div>
          <div>
            <span class="label-small">Focus</span>
            <span>NLP, LLM, GenAI, Full Stack</span>
          </div>
        </div>
      </section>

      <aside class="hero-aside hero-parallax">
        <div class="badge">PORTFOLIO ¬∑ 2025</div>
        <div class="binary">
          1 0 0 1 0 0 1 1 0 1 1 1 1 1 0<br />
          1 0 1 0 0 1 1 0 1 0 0 0  1 0 1<br />
          0 0 1 1 1 0 1 1 1 1 1 0 0 1 0<br />
          1 0 1 0 0 1 1 0 1 0 0 0 0 0 1<br />
          1 0 1 0 0 1 1 0 1 0 0 0 1 0 1
        </div>
        <div class="since">
          Coding since 2019<br />
          
        </div>
      </aside>
    </main>

    <!-- BOTTOM BAR -->
    <footer class="footer">
        
      <div class="footer-left">
        <span>Built with HTML, CSS, and vanilla JS on GitHub Pages.</span>
      </div>
      <div class="footer-right">
        <a href="mailto:taoruijie666 at gmail dot com" id="contact">Email</a>
        <a href="https://github.com/JackTao888" target="_blank" rel="noreferrer">GitHub</a>
        <a href="https://linkedin.com/in/ruijie-tao" target="_blank" rel="noreferrer">LinkedIn</a>
      </div>
    </footer>
  </div>

  <!-- SCROLLABLE CONTENT SECTION -->
  <section class="scroll-section">
    <div class="text-window">
      <h2>About</h2>
      <p>
        I'm a creative developer passionate about pushing the boundaries of technology and design. 
        My work spans across computer science, applied mathematics, and the exciting realm of 
        next-generation AI systems.
      </p>
      <p>
        With a focus on NLP and Large Language Models, I explore the intersection of creativity 
        and computation, building software that bridges the gap between human intuition and 
        machine intelligence.
      </p>
      <p>
        Currently pursuing Computer Science at JHU and Applied Math at UCSB, I'm constantly 
        learning and contributing to the future of AI-driven solutions.
      </p>
    </div>
  </section>

  <!-- THIRD PAGE SECTION -->
  <section class="page-section" id="work">
    <div class="page-content-layout">
      <!-- Left side: Icon/Graph -->
      <div class="icon-container">
        <img src="empty_recent_v3.webp" alt="Document history icon" class="graph-icon" />
      </div>

      <!-- Right side: 3 text blocks with improved timeline layout -->
      <div class="text-blocks-container">
        <div class="text-block-item">
          <div class="text-block">
            <h3>Document History</h3>
            <p>Track and manage versions with comprehensive timeline features.</p>
          </div>
        </div>
        <div class="text-block-item">
          <div class="text-block">
            <h3>Version Control</h3>
            <p>Efficient system for managing document revisions and changes.</p>
          </div>
        </div>
        <div class="text-block-item">
          <div class="text-block">
            <h3>Time Tracking</h3>
            <p>Monitor document lifecycle and modification history over time.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- FOURTH PAGE SECTION - Heart Echo Project -->
  <section class="page-section" id="project">
    <div class="project-page-container">
      
      <!-- Project Header -->
      <div class="project-header-full">
          <h2>Heart Echo</h2>
          <h3>AI-Powered Anonymous Mental Health Companion</h3>
      </div>

      <div class="project-content-split">
        <!-- Left Side: Info & Tech & Contributors -->
        <div class="project-info-side">
          
            <div class="glass-card project-intro">
            <p>
                  Mental health is a critical global issue affecting millions. <strong>Heart Echo</strong> is an innovative AI-powered 
                  companion leveraging natural language processing to provide anonymous, accessible emotional support.
            </p>
            <p>
                  Built with modern web technologies, the platform ensures secure, scalable, and empathetic interactions 
                  bridging the gap between human needs and machine intelligence.
                </p>
                
                <div class="project-links-row">
                   <a href="https://github.com/JackTao888/H4H2025-HeartEcho" target="_blank" rel="noreferrer" class="project-btn">
                     <span>View on GitHub</span>
                     <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>
            </a>
          </div>
        </div>

            <div class="tech-stack-compact">
                 <div class="tech-pill">
                    <span class="tech-cat">Frontend</span>
                    <span class="tech-val">Next.js ‚Ä¢ Tailwind</span>
                 </div>
                 <div class="tech-pill">
                    <span class="tech-cat">Backend</span>
                    <span class="tech-val">Flask ‚Ä¢ Python</span>
                 </div>
                 <div class="tech-pill">
                    <span class="tech-cat">Data</span>
                    <span class="tech-val">MySQL ‚Ä¢ REST API</span>
                 </div>
                 <div class="tech-pill">
                    <span class="tech-cat">AI Engine</span>
                    <span class="tech-val">OpenAI ‚Ä¢ Prompt Eng</span>
                 </div>
            </div>

            <!-- Contributors (Moved Here) -->
            <div class="contributors-compact">
              <h4>Contributors</h4>
              <div class="contributors-row">
                 <div class="contributor-chip">
                    <div class="avatar" style="background: #6D28D9;">RT</div>
                    <div class="meta">
                      <span class="name">Ruijie Tao</span>
                      <span class="role">Lead Dev</span>
                    </div>
                 </div>
                 <div class="contributor-chip">
                    <div class="avatar" style="background: #BE185D;">XX</div>
                    <div class="meta">
                      <span class="name">xxx</span>
                      <span class="role">Frontend</span>
            </div>
            </div>
                 <div class="contributor-chip">
                    <div class="avatar" style="background: #0891B2;">XX</div>
                    <div class="meta">
                      <span class="name">xxx</span>
                      <span class="role">Backend</span>
            </div>
          </div>
        </div>
      </div>

        </div>

        <!-- Right Side: Diagram -->
        <div class="project-visual-side">
          <div class="diagram-glass-container">
            <svg width="100%" height="100%" viewBox="0 0 900 650" xmlns="http://www.w3.org/2000/svg" class="animated-graph">
            <defs>
                <linearGradient id="gradBox" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:rgba(255,255,255,0.1)" />
                  <stop offset="100%" style="stop-color:rgba(255,255,255,0.05)" />
              </linearGradient>
                <linearGradient id="gradStroke" x1="0%" y1="0%" x2="100%" y2="0%">
                  <stop offset="0%" style="stop-color:#6D28D9" />
                  <stop offset="100%" style="stop-color:#0891B2" />
              </linearGradient>
                <filter id="glowFancy" x="-50%" y="-50%" width="200%" height="200%">
                  <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
                  <feComposite in="coloredBlur" in2="SourceGraphic" operator="over"/>
              </filter>
                
                <!-- Animations -->
                <style>
                  .flow-line { 
                    stroke-dasharray: 10; 
                    animation: flow 2s linear infinite; 
                    opacity: 0.6;
                  }
                  .box-hover { transition: all 0.3s ease; cursor: pointer; }
                  .box-hover:hover rect { stroke: white; stroke-width: 2; stroke-opacity: 0.8; }
                  .box-hover:hover text { fill: white; }
                  
                  @keyframes flow {
                    to { stroke-dashoffset: -20; }
                  }
                  
                  .pulse-circle { animation: pulse 3s infinite; }
                  @keyframes pulse {
                    0% { opacity: 0.3; r: 5; }
                    50% { opacity: 0.8; r: 7; }
                    100% { opacity: 0.3; r: 5; }
                  }
                </style>
            </defs>

              <!-- CONNECTORS -->
              <g stroke="url(#gradStroke)" stroke-width="2" fill="none">
                <!-- Functionality Blocks -> Frontend -->
                <!-- Posts (x=150+50=200), Frontend top (y=160) -->
                <path d="M 200 140 L 200 155" class="flow-line" style="animation-delay: 0s" />
                <!-- Comments (x=280+50=330), Frontend top (y=160) -->
                <path d="M 330 140 L 330 155" class="flow-line" style="animation-delay: 0.2s" />
                <!-- Likes (x=410+50=460), Frontend top (y=160) -->
                <path d="M 460 140 L 460 155" class="flow-line" style="animation-delay: 0.4s" />
                <!-- Info Flow (x=540+50=590), Frontend top (y=160) -->
                <path d="M 590 140 L 590 155" class="flow-line" style="animation-delay: 0.6s" />
                
                <!-- Frontend -> Backend -->
                <!-- Frontend bottom (y=240), Backend top (y=300) -->
                <path d="M 400 235 L 400 295" class="flow-line" />
                
                <!-- Backend -> Recommendation Algorithm -->
                <!-- Backend right (x=520), Recommendation left (x=620), both at y=350 (middle of Backend) -->
                <path d="M 520 350 L 615 350" class="flow-line" style="animation-delay: 0.5s" />
                
                <!-- Backend -> DB -->
                <!-- Backend bottom (y=400), DB top (y=500) -->
                <path d="M 400 395 L 400 440 L 250 440 L 250 495" class="flow-line" style="animation-delay: 0.5s" />
                
                <!-- Backend -> AI -->
                <!-- Backend bottom (y=400), AI top (y=500) -->
                <path d="M 400 395 L 400 440 L 550 440 L 550 495" class="flow-line" style="animation-delay: 0.5s" />
              </g>

              <!-- NODES -->
              
              <!-- Functionality Blocks Above Frontend -->
              
              <!-- Posts -->
              <g class="box-hover" transform="translate(150, 10)">
                <rect x="0" y="0" width="100" height="130" rx="10" fill="url(#gradBox)" stroke="rgba(255,255,255,0.2)" stroke-width="1" />
                <text x="50" y="30" text-anchor="middle" fill="#fff" font-weight="bold" font-size="12" letter-spacing="0.5">POSTS</text>
                <text x="50" y="50" text-anchor="middle" fill="rgba(255,255,255,0.5)" font-size="9">Create</text>
                <text x="50" y="70" text-anchor="middle" fill="rgba(255,255,255,0.5)" font-size="9">View</text>
                <text x="50" y="90" text-anchor="middle" fill="rgba(255,255,255,0.5)" font-size="9">Edit</text>
                <text x="50" y="110" text-anchor="middle" fill="rgba(255,255,255,0.5)" font-size="9">Delete</text>
                <circle cx="80" cy="20" r="3" fill="#BE185D" class="pulse-circle" />
              </g>

              <!-- Comments -->
              <g class="box-hover" transform="translate(280, 10)">
                <rect x="0" y="0" width="100" height="130" rx="10" fill="url(#gradBox)" stroke="rgba(255,255,255,0.2)" stroke-width="1" />
                <text x="50" y="30" text-anchor="middle" fill="#fff" font-weight="bold" font-size="12" letter-spacing="0.5">COMMENTS</text>
                <text x="50" y="50" text-anchor="middle" fill="rgba(255,255,255,0.5)" font-size="9">Add</text>
                <text x="50" y="70" text-anchor="middle" fill="rgba(255,255,255,0.5)" font-size="9">Reply</text>
                <text x="50" y="90" text-anchor="middle" fill="rgba(255,255,255,0.5)" font-size="9">Thread</text>
                <text x="50" y="110" text-anchor="middle" fill="rgba(255,255,255,0.5)" font-size="9">Moderate</text>
                <circle cx="80" cy="20" r="3" fill="#0891B2" class="pulse-circle" />
              </g>

              <!-- Likes -->
              <g class="box-hover" transform="translate(410, 10)">
                <rect x="0" y="0" width="100" height="130" rx="10" fill="url(#gradBox)" stroke="rgba(255,255,255,0.2)" stroke-width="1" />
                <text x="50" y="30" text-anchor="middle" fill="#fff" font-weight="bold" font-size="12" letter-spacing="0.5">LIKES</text>
                <text x="50" y="50" text-anchor="middle" fill="rgba(255,255,255,0.5)" font-size="9">Like</text>
                <text x="50" y="70" text-anchor="middle" fill="rgba(255,255,255,0.5)" font-size="9">Unlike</text>
                <text x="50" y="90" text-anchor="middle" fill="rgba(255,255,255,0.5)" font-size="9">Count</text>
                <text x="50" y="110" text-anchor="middle" fill="rgba(255,255,255,0.5)" font-size="9">Real-time</text>
                <circle cx="80" cy="20" r="3" fill="#D97706" class="pulse-circle" />
              </g>

              <!-- Information Flow -->
              <g class="box-hover" transform="translate(540, 10)">
                <rect x="0" y="0" width="100" height="130" rx="10" fill="url(#gradBox)" stroke="rgba(255,255,255,0.2)" stroke-width="1" />
                <text x="50" y="30" text-anchor="middle" fill="#fff" font-weight="bold" font-size="11" letter-spacing="0.5">INFO FLOW</text>
                <text x="50" y="50" text-anchor="middle" fill="rgba(255,255,255,0.5)" font-size="9">Feed</text>
                <text x="50" y="70" text-anchor="middle" fill="rgba(255,255,255,0.5)" font-size="9">Update</text>
                <text x="50" y="90" text-anchor="middle" fill="rgba(255,255,255,0.5)" font-size="9">Notify</text>
                <text x="50" y="110" text-anchor="middle" fill="rgba(255,255,255,0.5)" font-size="9">Sync</text>
                <circle cx="80" cy="20" r="3" fill="#059669" class="pulse-circle" />
              </g>
              
              <!-- 1. Frontend (Next.js) -->
              <g class="box-hover" transform="translate(280, 160)">
                <rect x="0" y="0" width="240" height="80" rx="12" fill="url(#gradBox)" stroke="rgba(255,255,255,0.2)" stroke-width="1" />
                <text x="120" y="35" text-anchor="middle" fill="#fff" font-weight="bold" font-size="14" letter-spacing="1">FRONTEND</text>
                <text x="120" y="55" text-anchor="middle" fill="rgba(255,255,255,0.6)" font-size="11">Next.js ‚Ä¢ Tailwind ‚Ä¢ TS</text>
                <!-- Decor -->
                <circle cx="220" cy="40" r="4" fill="#BE185D" class="pulse-circle" />
              </g>

              <!-- 2. Backend (Flask) -->
              <g class="box-hover" transform="translate(280, 300)">
                 <!-- Label Tag -->
                <rect x="0" y="0" width="240" height="100" rx="12" fill="url(#gradBox)" stroke="rgba(255,255,255,0.2)" stroke-width="1" />
                <text x="120" y="45" text-anchor="middle" fill="#fff" font-weight="bold" font-size="14" letter-spacing="1">BACKEND API</text>
                <text x="120" y="65" text-anchor="middle" fill="rgba(255,255,255,0.6)" font-size="11">Python ‚Ä¢ Flask ‚Ä¢ REST</text>
                <circle cx="20" cy="50" r="4" fill="#6D28D9" class="pulse-circle" />
              </g>

              <!-- 2b. Recommendation Algorithm (Right of Backend) -->
              <g class="box-hover" transform="translate(620, 300)">
                <rect x="0" y="0" width="180" height="100" rx="12" fill="url(#gradBox)" stroke="rgba(255,255,255,0.2)" stroke-width="1" />
                <text x="90" y="35" text-anchor="middle" fill="#fff" font-weight="bold" font-size="13" letter-spacing="0.5">RECOMMENDATION</text>
                <text x="90" y="50" text-anchor="middle" fill="#fff" font-weight="bold" font-size="13" letter-spacing="0.5">ALGORITHM</text>
                <text x="90" y="70" text-anchor="middle" fill="rgba(255,255,255,0.6)" font-size="10">Content-Based</text>
                <text x="90" y="85" text-anchor="middle" fill="rgba(255,255,255,0.6)" font-size="10">ML Filtering</text>
                <circle cx="160" cy="25" r="4" fill="#7C3AED" class="pulse-circle" />
              </g>

              <!-- 3. Database (MySQL) -->
              <g class="box-hover" transform="translate(150, 500)">
                <rect x="0" y="0" width="200" height="80" rx="12" fill="url(#gradBox)" stroke="rgba(255,255,255,0.2)" stroke-width="1" />
                <text x="100" y="35" text-anchor="middle" fill="#fff" font-weight="bold" font-size="13" letter-spacing="1">DATABASE</text>
                <text x="100" y="55" text-anchor="middle" fill="rgba(255,255,255,0.6)" font-size="11">MySQL</text>
                <circle cx="180" cy="40" r="4" fill="#0891B2" class="pulse-circle" />
              </g>

              <!-- 4. AI Engine (OpenAI) -->
              <g class="box-hover" transform="translate(450, 500)">
                <rect x="0" y="0" width="200" height="80" rx="12" fill="url(#gradBox)" stroke="rgba(255,255,255,0.2)" stroke-width="1" />
                <text x="100" y="35" text-anchor="middle" fill="#fff" font-weight="bold" font-size="13" letter-spacing="1">AI ENGINE</text>
                <text x="100" y="55" text-anchor="middle" fill="rgba(255,255,255,0.6)" font-size="11">OpenAI GPT-4</text>
                <circle cx="20" cy="40" r="4" fill="#D97706" class="pulse-circle" />
              </g>

              <!-- User Flow Labels (Optional subtle indicators) -->
              <text x="415" y="255" fill="rgba(255,255,255,0.4)" font-size="10" font-style="italic">JSON / HTTP</text>
              <text x="560" y="285" fill="rgba(255,255,255,0.4)" font-size="10" font-style="italic">Algorithm</text>
              <text x="300" y="480" fill="rgba(255,255,255,0.4)" font-size="10" font-style="italic">SQL Query</text>
              <text x="480" y="480" fill="rgba(255,255,255,0.4)" font-size="10" font-style="italic">API Call</text>

          </svg>
          </div>
        </div>
      </div>

    </div>
  </section>

  <script>
    // ============================
    // COLORFUL BLUR BACKGROUND EFFECT
    // ============================
    /*
      Animated colorful blobs with blur effect
      - vibrant colors (deep blues, purples, magentas, cyans)
      - smooth movement and blending
      - creates a dreamy blur effect
    */

    const matrixCanvas = document.getElementById("matrixCanvas");
    const matrixCtx = matrixCanvas.getContext("2d");

    let matrixWidth, matrixHeight;
    const particles = [];
    const particleCount = 8;
    
    // Darker vibrant color palette
    const colors = [
      '#6D28D9', // darker purple
      '#BE185D', // darker pink/magenta
      '#0891B2', // darker cyan
      '#2563EB', // darker blue
      '#7C3AED', // darker purple
      '#DC2626', // darker rose/red
      '#059669', // darker emerald
      '#D97706'  // darker amber
    ];

    function resizeMatrix() {
      matrixWidth = matrixCanvas.width = window.innerWidth;
      matrixHeight = matrixCanvas.height = window.innerHeight;
      
      // Reinitialize particles on resize
      if (particles.length === 0) {
        initParticles();
      } else {
        // Adjust existing particles
        particles.forEach(p => {
          p.x = Math.min(p.x, matrixWidth);
          p.y = Math.min(p.y, matrixHeight);
        });
      }
    }

    function initParticles() {
      particles.length = 0;
      for (let i = 0; i < particleCount; i++) {
        particles.push({
          x: Math.random() * matrixWidth,
          y: Math.random() * matrixHeight,
          vx: (Math.random() - 0.5) * 0.5,
          vy: (Math.random() - 0.5) * 0.5,
          radius: 150 + Math.random() * 200,
          color: colors[Math.floor(Math.random() * colors.length)],
          opacity: 0.4 + Math.random() * 0.3
        });
      }
    }

    window.addEventListener("resize", resizeMatrix);
    resizeMatrix();
    if (particles.length === 0) initParticles();

    function drawMatrix(time) {
      const t = time * 0.001;

      // Clear with slight fade for trailing effect
      matrixCtx.fillStyle = "rgba(5, 6, 8, 0.1)";
      matrixCtx.fillRect(0, 0, matrixWidth, matrixHeight);

      // Update and draw particles
      particles.forEach((particle, i) => {
        // Update position with smooth movement
        particle.x += particle.vx;
        particle.y += particle.vy;

        // Add some wave-like movement
        particle.x += Math.sin(t * 0.5 + i) * 0.3;
        particle.y += Math.cos(t * 0.7 + i) * 0.3;

        // Bounce off edges
        if (particle.x < 0 || particle.x > matrixWidth) particle.vx *= -1;
        if (particle.y < 0 || particle.y > matrixHeight) particle.vy *= -1;

        // Keep particles in bounds
        particle.x = Math.max(0, Math.min(matrixWidth, particle.x));
        particle.y = Math.max(0, Math.min(matrixHeight, particle.y));

        // Draw colorful blob with gradient
        const gradient = matrixCtx.createRadialGradient(
          particle.x, particle.y, 0,
          particle.x, particle.y, particle.radius
        );
        
        // Convert hex color to rgb for rgba
        const r = parseInt(particle.color.slice(1, 3), 16);
        const g = parseInt(particle.color.slice(3, 5), 16);
        const b = parseInt(particle.color.slice(5, 7), 16);
        
        gradient.addColorStop(0, `rgba(${r}, ${g}, ${b}, ${particle.opacity})`);
        gradient.addColorStop(0.5, `rgba(${r}, ${g}, ${b}, ${particle.opacity * 0.6})`);
        gradient.addColorStop(1, `rgba(${r}, ${g}, ${b}, 0)`);

        matrixCtx.fillStyle = gradient;
        matrixCtx.beginPath();
        matrixCtx.arc(particle.x, particle.y, particle.radius, 0, Math.PI * 2);
        matrixCtx.fill();
      });

      requestAnimationFrame(drawMatrix);
    }

    requestAnimationFrame(drawMatrix);

    // ============================
    // Canvas ripple / wave effect
    // ============================

    const canvas_h = document.getElementById('hero-canvas');
    const ctx_h = canvas_h.getContext('2d');

    let width_h = window.innerWidth;
    let height_h = window.innerHeight;
    let dpr = window.devicePixelRatio || 1;


    let ripples = [];
    const maxBaseRadius = 220;
    const rippleLifetime = 900; // ms
    const backgroundColor = '#050608';

    function resizeCanvas() {
        width_h = window.innerWidth;
        height_h = window.innerHeight;
        dpr = window.devicePixelRatio || 1;

        canvas_h.width = width_h * dpr;
        canvas_h.height = height_h * dpr;
        canvas_h.style.width = width_h + 'px';
        canvas_h.style.height = height_h + 'px';
        ctx_h.setTransform(dpr, 0, 0, dpr, 0, 0);
    }


    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    // Create a ripple on pointer move
    let lastRippleTime = 0;
    const rippleInterval = 70; // ms between new ripples

    window.addEventListener('pointermove', (e) => {
      const now = performance.now();
      if (now - lastRippleTime < rippleInterval) return;
      lastRippleTime = now;

      const rect = canvas_h.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;

      const maxRadius = maxBaseRadius * (0.6 + Math.random() * 0.6);

      ripples.push({
        x,
        y,
        startTime: now,
        maxRadius,
      });

      // limit number of ripples
      if (ripples.length > 80) {
        ripples.splice(0, ripples.length - 80);
      }
    });

    function draw(time) {
      // Clear canvas with transparent background to show matrix behind
      ctx_h.clearRect(0, 0, width_h, height_h);

      // Draw ripples
      for (let i = ripples.length - 1; i >= 0; i--) {
        const r = ripples[i];
        const elapsed = time - r.startTime;
        if (elapsed > rippleLifetime) {
          ripples.splice(i, 1);
          continue;
        }

        const t = elapsed / rippleLifetime; // 0 ‚Üí 1
        const radius = r.maxRadius * easeOutQuad(t);
        const alpha = (1 - t) * 0.7;

        const gradient = ctx_h.createRadialGradient(
          r.x,
          r.y,
          radius * 0.2,
          r.x,
          r.y,
          radius
        );
        gradient.addColorStop(0, `rgba(255, 255, 255, ${alpha * 0.35})`);
        gradient.addColorStop(0.5, `rgba(120, 200, 255, ${alpha * 0.15})`);
        gradient.addColorStop(1, 'rgba(0, 0, 0, 0)');

        ctx_h.fillStyle = gradient;
        ctx_h.beginPath();
        ctx_h.arc(r.x, r.y, radius, 0, Math.PI * 2);
        ctx_h.fill();
      }

      requestAnimationFrame(draw);
    }

    function easeOutQuad(t) {
      return 1 - (1 - t) * (1 - t);
    }

    requestAnimationFrame(draw);

    // ============================
    // Subtle parallax on hero text
    // ============================

    const parallaxEls = document.querySelectorAll('.hero-parallax');

    window.addEventListener('pointermove', (e) => {
      // Don't apply parallax if first page is fading out
      const firstPage = document.querySelector('.page');
      if (firstPage && firstPage.classList.contains('fade-out')) {
        return;
      }

      const cx = window.innerWidth / 2;
      const cy = window.innerHeight / 2;
      const dx = (e.clientX - cx) / cx;  // -1 ‚Üí 1
      const dy = (e.clientY - cy) / cy;

      const strength = 8; // px

      parallaxEls.forEach((el, idx) => {
        const factor = 1 + idx * 0.2; // slightly different per element
        const tx = -dx * strength * factor;
        const ty = -dy * strength * factor;
        el.style.transform = `translate3d(${tx}px, ${ty}px, 0)`;
      });
    });

    // ============================
    // Smooth page transition animations
    // ============================
    /*
      Fade-out from center animation for page transitions
      Works for all pages - detects scroll and triggers animations
    */

    const firstPage = document.querySelector('.page');
    
    // Threshold for triggering fade (percentage of viewport height scrolled)
    const fadeThreshold = 0.3; // 30% of viewport height

    function handleScrollAnimations() {
      const scrollY = window.scrollY || window.pageYOffset;
      const viewportHeight = window.innerHeight;
      const threshold = viewportHeight * fadeThreshold;

      // Fade out first page when scrolling past threshold
      if (firstPage) {
        if (scrollY > threshold) {
          firstPage.classList.add('fade-out');
        } else {
          firstPage.classList.remove('fade-out');
        }
      }

      // Fade in all scrollable sections (works for .scroll-section and .page-section)
      const allSections = document.querySelectorAll('.scroll-section, .page-section');
      allSections.forEach((section) => {
        const rect = section.getBoundingClientRect();
        const sectionTop = rect.top;
        const sectionVisible = sectionTop < viewportHeight * 0.7;

        if (sectionVisible) {
          section.classList.add('fade-in');
        } else if (scrollY < viewportHeight) {
          // Only remove fade-in if we're back near the top
          section.classList.remove('fade-in');
        }
      });
    }

    // Initial check
    handleScrollAnimations();

    // Throttled scroll handler for performance
    let scrollTimeout;
    window.addEventListener('scroll', () => {
      if (scrollTimeout) {
        cancelAnimationFrame(scrollTimeout);
      }
      scrollTimeout = requestAnimationFrame(handleScrollAnimations);
    }, { passive: true });
  </script>
</body>
</html>